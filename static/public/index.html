<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta name="description" content="Hyperglass is a fast and easy to use web proxy that will let you bypass most (if not all) restrictions">
    <meta name="keywords" content="proxy, web proxy, ultraviolet, service workers, unblock websites, unblock chromebook, free web proxy, proxy list, proxy sites, un block chromebook, online proxy, proxy server, proxysite, proxy youtube, bypass securly, bypass iboss, bypass lightspeed filter, holy unblocker, chromebooks, titanium network, unblock youtube, youtube proxy, unblocked youtube, youtube unblocked, hyperglass, proxy">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <title>HyperGlass</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="baremux/index.js" defer></script>
    <script src="epoxy/index.js" defer></script>
    <script src="uv/uv.bundle.js" defer></script>
    <script src="uv/uv.config.js" defer></script>
    <script src="register-sw.js" defer></script>
    <script src="search.js" defer></script>
    <script src="index.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Bitcount+Prop+Single:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/navbars.css">
</head>
<body>
    <div id="navbar-placeholder"></div>
    <script>
        // Okay maybe i got claude to help me debug the sidebar not showing up
        console.log('Starting navbar load...');
        fetch('navbars.html')
            .then(response => {
                console.log('Fetch response:', response.ok);
                return response.text();
            })
            .then(html => {
                console.log('HTML loaded, length:', html.length);
                document.getElementById('navbar-placeholder').innerHTML = html;
                console.log('HTML inserted into page');
                
                const menuToggle = document.getElementById('menu-toggle');
                const sidebar = document.getElementById('sidebar');
                console.log('Menu toggle found:', !!menuToggle);
                console.log('Sidebar found:', !!sidebar);
                
                initNavbar();
            })
            .catch(error => {
                console.error('Error loading navbar:', error);
            });
            
        function initNavbar() {
            console.log('Initializing navbar...');
            
            const menuToggle = document.getElementById('menu-toggle');
            const sidebar = document.getElementById('sidebar');
            const closeSidebar = document.getElementById('close-sidebar');
            const sidebarOverlay = document.getElementById('sidebar-overlay');

            console.log('Elements found:');
            console.log('- Menu Toggle:', !!menuToggle);
            console.log('- Sidebar:', !!sidebar);
            console.log('- Close Sidebar:', !!closeSidebar);
            console.log('- Sidebar Overlay:', !!sidebarOverlay);

            if (!menuToggle || !sidebar || !closeSidebar || !sidebarOverlay) {
                console.error('Some elements are missing!');
                return;
            }

            function openSidebar() {
                console.log('Opening sidebar...');
                sidebar.classList.add('open');
                sidebarOverlay.classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            function closeSidebarFunc() {
                console.log('Closing sidebar...');
                sidebar.classList.remove('open');
                sidebarOverlay.classList.remove('show');
                document.body.style.overflow = '';
            }

            menuToggle.addEventListener('click', function(e) {
                console.log('Menu toggle clicked!');
                e.preventDefault();
                openSidebar();
            });

            closeSidebar.addEventListener('click', function(e) {
                console.log('Close button clicked!');
                e.preventDefault();
                closeSidebarFunc();
            });

            sidebarOverlay.addEventListener('click', function(e) {
                console.log('Overlay clicked!');
                closeSidebarFunc();
            });

            const quickAppsDropdown = document.getElementById('quick-apps-dropdown');
            const quickAppsMenu = document.getElementById('quick-apps-menu');

            if (quickAppsDropdown && quickAppsMenu) {
                quickAppsDropdown.addEventListener('click', (e) => {
                    console.log('Dropdown clicked!');
                    e.preventDefault();
                    quickAppsDropdown.classList.toggle('show');
                    quickAppsMenu.classList.toggle('show');
                });

                document.addEventListener('click', (e) => {
                    if (!quickAppsDropdown.contains(e.target)) {
                        quickAppsDropdown.classList.remove('show');
                        quickAppsMenu.classList.remove('show');
                    }
                });
            }

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && sidebar.classList.contains('open')) {
                    closeSidebarFunc();
                }
            });
            console.log('Navbar initialization complete!');
        }
    </script>
    
    <div class="flex-center">
        <h3 class="galaxy-text">Hyperglass</h3>
        <form id="uv-form">
            <input
                id="uv-search-engine"
                value="https://www.google.com/search?q=%s"
                type="hidden"
            />
            <input id="uv-address" type="text" placeholder="Search the web freely" />
        </form>
        <p class="bitcoin-font quotes">Search freely, browse securely</p>
    </div>
    <div class="desc">
        <p id="uv-error"></p>
        <pre id="uv-error-code"></pre>
    </div>
</body>
</html>